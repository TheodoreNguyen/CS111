#
#		'make' 				builds the lab2a executable from the lab2a.c C source module
#
#		'make dist'			creates a tarball labeled 'lab2a-704156701.tar.gz' that contains
#							only the files 'lab2a.c', 'Makefile', and 'README'
#
#		'make clean'		deletes the lab2a executable generated by the build process
#						
#		'make superclean'	deletes all files in the current directory not used to create the tarball
#
#		

SHELL:=/bin/bash -O extglob
CC = gcc
CFLAGS = -pthread -g
TARGET = lab2a
default: lab2a

lab2a: 
	$(CC) $(CFLAGS) lab2a.c -o lab2a
	
dist:
	tar -czvf lab2a-704156701.tar.gz lab2a.c Makefile README timeopVsThreads.png timeopVsIterations.png

#cleaning the directory
clean:
	rm lab2a

#WARNING: will delete ALL files in the directory besides those needed for the tar dist. 
superclean:
	rm !(.|..|lab2a.c|Makefile|README|timeopVsIterations.png|timeopVsThreads.png)

	
#testing the exec

test:
	./lab2a --iterations=10000 --threads=10 
	
yield: 
	./lab2a --iterations=10000 --threads=10  --yield

mutex:
	./lab2a --iterations=100000 --threads=10 --sync=m	
	
ymutex:
	./lab2a --iterations=100000 --threads=10 --yield --sync=m
	
spin:
	./lab2a --iterations=100000 --threads=10 --sync=s
	
yspin:
	./lab2a --iterations=100000 --threads=10 --yield --sync=s
	
compare:
	./lab2a --iterations=100000 --threads=10 --sync=c

ycompare:
	./lab2a --iterations=100000 --threads=10 --yield --sync=c
	
	